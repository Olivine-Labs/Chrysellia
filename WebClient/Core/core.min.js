(function(c){var d=function(){},a={};a=a.prototype={Result:0,Data:{}};d=d.prototype={Version:"0.0.1",CurrentLanguage:"en",ER_SUCCESS:0,ER_BADDATA:251,ER_ALREADYEXISTS:252,ER_MALFORMED:253,ER_DBERROR:254,ER_ACCESSDENIED:255,SERVERCODE_DIRECTORY:"./Server/",STATICINFO_DIRECTORY:"./Core/StaticInfo/",CheckVersion:function(b){$.ajax({async:false,url:d.STATICINFO_DIRECTORY+"version.txt",cache:false,success:function(e){b(e)}})}};a=function(){};a=a.prototype=function(){this.CharacterId="";this.HasPin=false;
this.MapId=this.CreatedOn=this.Name="";this.Gold=this.Health=this.Vitality=this.Wisdom=this.Intelligence=this.Dexterity=this.Strength=this.Experience=this.FreeLevels=this.Level=this.AlignOrder=this.AlignGood=this.Gender=this.RaceId=this.PositionY=this.PositionX=0;this.CurrentChannel="CHAN_00000000000000000000001";this.Channels=[];this.Inventories=[];this.Inventories.Personal=[];this.Equipment=[];this.CurrentMap=Maps.MAP_00000000000000000000001;this.RaceName=function(){return c.Races[this.RaceId].Name};
this.GenderName=function(){return this.Gender==0?"Male":"Female"};this.AlignName=function(){var b="",e="";if(this.AlignGood<=-100)b="Evi ";else if(this.AlignGood>=100)b="Good";if(this.AlignOrder<=-100)e="Chaotic";else if(this.AlignOrder>=100)e="Ordered";var f="";if(b!="")f=" ";return b+f+e};this.Construct=function(b){this.CharacterId=b.CharacterId;this.HasPin=b.HasPin;this.Name=b.Name;this.CreatedOn=b.CreatedOn;this.MapId=b.MapId;this.PositionX=b.PositionX;this.PositionY=b.PositionY;this.RaceId=b.RaceId;
this.Gender=b.Gender;this.AlignGood=b.AlignGood;this.AlignOrder=b.AlignOrder;this.Level=b.Level;this.FreeLevels=b.FreeLevels;this.Experience=b.Experience;this.Strength=b.Strength;this.Dexterity=b.Dexterity;this.Intelligence=b.Intelligence;this.Wisdom=b.Wisdom;this.Vitality=b.Vitality;this.Health=b.Health;this.Gold=b.Gold;this.Channels=b.Channels;this.CurrentMap=Maps[b.MapId];this.Equipment=b.Equipment}};a.prototype.constructor=a;c.V2Core=c.vc=d;c.Character=a})(window);
(function(){var c=function(){};c=c.prototype={ACTION_LOGIN:0,ACTION_REGISTER:1,ACTION_LOGOUT:2,Login:function(d,a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Account.php",{Action:c.ACTION_LOGIN,Data:JSON.stringify({UserName:d,Password:a})},function(e){b(e)})},Register:function(d,a,b,e){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Account.php",{Action:c.ACTION_REGISTER,Data:JSON.stringify({UserName:d,Password:a,Email:b})},function(f){e(f)})},Logout:function(d){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Account.php",
{Action:c.ACTION_LOGOUT,Data:JSON.stringify({})},function(a){d(a)})}};V2Core.AccountService=V2Core.as=c})(window);
(function(){var c=function(){};c=c.prototype={ACTION_CREATE:0,ACTION_LIST:1,ACTION_CHECKNAME:2,ACTION_SELECTCHARACTER:3,ACTION_GETCURRENTCHARACTER:4,Create:function(d,a,b,e,f,g,h,i,j,k){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Character.php",{Action:c.ACTION_CREATE,Data:JSON.stringify({Name:d,Gender:a,Pin:b,RaceId:e,Strength:f,Dexterity:g,Intelligence:h,Wisdom:i,Vitality:j})},function(l){k(l)})},List:function(d){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Character.php",{Action:c.ACTION_LIST,Data:JSON.stringify({})},
function(a){d(a)})},CheckName:function(d,a){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Character.php",{Action:c.ACTION_CHECKNAME,Data:JSON.stringify({Name:d})},function(b){a(b)})},Select:function(d,a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Character.php",{Action:c.ACTION_SELECTCHARACTER,Data:JSON.stringify({Character:d,Pin:a})},function(e){b(e)})},GetCurrentCharacter:function(d){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Character.php",{Action:c.ACTION_GETCURRENTCHARACTER,Data:JSON.stringify({})},function(a){d(a)})},
GetNextLevelExperienceRequirement:function(d){return d*100}};V2Core.CharacterService=V2Core.cs=c})(window);
(function(){var c=[];c.General="CHAN_00000000000000000000001";c.Trade="CHAN_00000000000000000000002";var d=function(){};d=d.prototype={ACTION_SENDMESSAGE:0,ACTION_GETMESSAGESFROMCHANNEL:1,ACTION_GETMESSAGESFORCHARACTER:2,CHAT_TYPE_GENERAL:0,CHAT_TYPE_EMOTE:1,CHAT_TYPE_SYSTEM:255,CHAT_TYPE_MOTD:999,StaticRooms:c,GetMessagesFromChannel:function(a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Chat.php",{Action:d.ACTION_GETMESSAGESFROMCHANNEL,Data:JSON.stringify({Channel:a})},function(e){b(e)})},GetMessagesForCharacter:function(a){$.getJSON(V2Core.SERVERCODE_DIRECTORY+
"Chat.php",{Action:d.ACTION_GETMESSAGESFORCHARACTER,Data:JSON.stringify({})},function(b){a(b)})},SendMessageToChannel:function(a,b,e){var f=vc.ch.Utilities.ParseMessage(b);if(f.Type==0)$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Chat.php",{Action:d.ACTION_SENDMESSAGE,Data:JSON.stringify({Channel:a,Message:b})},function(g){e(g)});else f.Type==1?vc.cmd.SendChatCommand(a,vc.CommandService.ACTION_EMOTE,f.Message,e):e({Result:V2Core.ER_MALFORMED,Data:{}})},JoinChannel:function(a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+
"Commands.php",{Action:vc.CommandService.ACTION_JOINCHANNEL,Data:JSON.stringify({Channel:a})},function(e){b(e)})},PartChannel:function(a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Commands.php",{Action:vc.CommandService.ACTION_CHANNEL_PART,Data:JSON.stringify({Channel:a})},function(e){b(e)})},CreateChannel:function(a,b,e){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Commands.php",{Action:vc.CommandService.ACTION_CHANNEL_CREATE,Data:JSON.stringify({Channel:a,Motd:b})},function(f){e(f)})},SetRights:function(a,
b,e,f){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Commands.php",{Action:vc.CommandService.ACTION_CHANNEL_SETRIGHTS,Data:JSON.stringify({Channel:a,Character:b,Rights:e})},function(g){f(g)})},Utilities:{},ChatTypes:{}};d.Utilities=d.Utilities.prototype={ParseMessage:function(a){var b=d.CHAT_TYPE_GENERAL,e=false;if(a.indexOf("/e ")==0){b=d.CHAT_TYPE_EMOTE;a=a.substr(3,a.length-3)}else if(a.indexOf("/join")==0){b=vc.CommandService.ACTION_JOINCHANNEL;a=a.substr(5,a.length-5);e=true}else if(a.indexOf("/create")==
0){b=vc.CommandService.ACTION_CHANNEL_CREATE;a=a.substr(7,a.length-7);e=true}else if(a.indexOf("/part")==0){b=vc.CommandService.ACTION_CHANNEL_PART;a=a.substr(1,a.length-1);e=true}else if(a.indexOf("/mod")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/admin")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/mute")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/unmute")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;
e=true}else if(a.indexOf("/kick")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/invite")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/unadmin")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}else if(a.indexOf("/unmod")==0){b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS;e=true}return{Type:b,Message:a,NonMessageCommand:e}},ParseRights:function(a){if(a.indexOf("/mod ")==0){rights={Read:1,Write:1,Moderate:1,isJoined:1};charName=a.substr(5,
a.length-5)}else if(a.indexOf("/admin ")==0){rights={Read:1,Write:1,Moderate:1,Administrate:1,isJoined:1};charName=a.substr(7,a.length-7)}else if(a.indexOf("/mute ")==0){charName=a.substr(6,a.length-6);rights={Read:1,Write:0,Moderate:0,Administrate:0,isJoined:1}}else if(a.indexOf("/unmute ")==0){charName=a.substr(8,a.length-8);rights={Read:1,Write:1,Moderate:0,Administrate:0,isJoined:1}}else if(a.indexOf("/invite ")==0){charName=a.substr(8,a.length-8);rights={Read:1,Write:1,Moderate:0,Administrate:0,
isJoined:0}}else if(a.indexOf("/kick ")==0){charName=a.substr(6,a.length-6);rights={Read:0,Write:0,Moderate:0,Administrate:0,isJoined:0}}else if(a.indexOf("/unadmin ")==0){charName=a.substr(9,a.length-9);rights={Read:1,Write:1,Moderate:1,Administrate:0,isJoined:0}}else if(a.indexOf("/unmod ")==0){charName=a.substr(7,a.length-7);rights={Read:1,Write:1,Moderate:0,Administrate:0,isJoined:0}}return{Rights:rights,Character:charName}}};V2Core.ChatService=V2Core.ch=d})(window);
(function(){var c=function(){};c=c.prototype={ACTION_EMOTE:0,ACTION_JOINCHANNEL:1,ACTION_CHANNEL_CREATE:2,ACTION_CHANNEL_PART:3,ACTION_CHANNEL_SETRIGHTS:4,SendChatCommand:function(d,a,b,e){switch(a){case ACTION_EMOTE:responseData={Action:c.ACTION_EMOTE,Data:JSON.stringify({Channel:d,Message:b})};break;default:e({Result:V2Core.ER_MALFORMED,Data:{}});return}$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Commands.php",responseData,function(f){e(f)})}};V2Core.CommandService=V2Core.cmd=c})(window);
(function(c){var d=function(){};d=d.prototype={UpdateStats:function(){$("#myCharacter_Name").text(c.MyCharacter.Name);$("#myCharacter_Strength").text(c.MyCharacter.Strength);$("#myCharacter_Dexterity").text(c.MyCharacter.Dexterity);$("#myCharacter_Wisdom").text(c.MyCharacter.Wisdom);$("#myCharacter_Intelligence").text(c.MyCharacter.Intelligence);$("#myCharacter_Vitality").text(c.MyCharacter.Vitality);$("#myCharacter_Gold").text(c.MyCharacter.Gold);$("#myCharacter_Experience").progressbar("value",
c.MyCharacter.Experience*1/vc.cs.GetNextLevelExperienceRequirement(c.MyCharacter.Level)*100);$("#myCharacter_Level").text(c.MyCharacter.Level)}};V2Core.Interface=V2Core.i=d})(window);
(function(){var c=function(){};c=c.prototype={ACTION_GETINVENTORY:0,ACTION_EQUIP:1,ACTION_UNEQUIP:2,ACTION_SEND_TRADE:3,ACTION_ACCEPT_TRADE:4,ITEM_TYPE_WEAPONS:0,ITEM_TYPE_ARMOR:1,ITEM_TYPE_ACCESSORIES:2,ITEM_TYPE_SPELLS:3,TypeMapping:["Weapon","Armor","Accessory","Spell"],GetInventory:function(d){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Item.php",{Action:c.ACTION_GETINVENTORY,Data:JSON.stringify({})},function(a){d(a)})},Equip:function(d,a,b,e){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Item.php",{Action:c.ACTION_EQUIP,
Data:JSON.stringify({ItemId:d,SlotNumber:b})},function(f){e(f,d,a,b)})},UnEquip:function(d,a,b,e){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Item.php",{Action:c.ACTION_UNEQUIP,Data:JSON.stringify({ItemId:d})},function(f){e(f,d,a,b)})},SendTrade:function(d,a,b,e){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Item.php",{Action:c.ACTION_SEND_TRADE,Data:JSON.stringify({ItemId:d,Gold:a,Player:b})},function(f){e(f)})},AcceptTrade:function(d,a){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Item.php",{Action:c.ACTION_ACCEPT_TRADE,
Data:JSON.stringify({Trade:d})},function(b){a(b)})}};V2Core.ItemService=V2Core.is=c})(window);(function(){var c=function(){};c=c.prototype={ACTION_MOVE:0,Move:function(d,a,b){$.getJSON(V2Core.SERVERCODE_DIRECTORY+"Map.php",{Action:c.ACTION_MOVE,Data:JSON.stringify({X:d,Y:a})},function(e){b(e)})}};V2Core.MapService=V2Core.ms=c})(window);
/*
 http://www.gnu.org/licenses/gpl.html [GNU General Public License]
 @param {jQuery} {md5:function(string))
 @return string
*/
;(function(q){var k=function(b,c){var h,g,j,i,a;j=b&2147483648;i=c&2147483648;h=b&1073741824;g=c&1073741824;a=(b&1073741823)+(c&1073741823);if(h&g)return a^2147483648^j^i;return h|g?a&1073741824?a^3221225472^j^i:a^1073741824^j^i:a^j^i},l=function(b,c,h,g,j,i,a){b=k(b,k(k(c&h|~c&g,j),a));return k(b<<i|b>>>32-i,c)},m=function(b,c,h,g,j,i,a){b=k(b,k(k(c&g|h&~g,j),a));return k(b<<i|b>>>32-i,c)},n=function(b,c,h,g,j,i,a){b=k(b,k(k(c^h^g,j),a));return k(b<<i|b>>>32-i,c)},o=function(b,c,h,g,j,i,a){b=k(b,
k(k(h^(c|~g),j),a));return k(b<<i|b>>>32-i,c)},p=function(b){var c="",h="",g;for(g=0;g<=3;g++){h=b>>>g*8&255;h="0"+h.toString(16);c+=h.substr(h.length-2,2)}return c};q.extend({md5:function(b){var c=[],h,g,j,i,a,d,e,f;c=b;c=c.replace(/\x0d\x0a/g,"\n");b="";for(h=0;h<c.length;h++){g=c.charCodeAt(h);if(g<128)b+=String.fromCharCode(g);else{if(g>127&&g<2048)b+=String.fromCharCode(g>>6|192);else{b+=String.fromCharCode(g>>12|224);b+=String.fromCharCode(g>>6&63|128)}b+=String.fromCharCode(g&63|128)}}c=b=
b;b=c.length;h=b+8;g=((h-h%64)/64+1)*16;j=Array(g-1);for(a=i=0;a<b;){h=(a-a%4)/4;i=a%4*8;j[h]|=c.charCodeAt(a)<<i;a++}h=(a-a%4)/4;i=a%4*8;j[h]|=128<<i;j[g-2]=b<<3;j[g-1]=b>>>29;c=j;a=1732584193;d=4023233417;e=2562383102;f=271733878;for(b=0;b<c.length;b+=16){h=a;g=d;j=e;i=f;a=l(a,d,e,f,c[b+0],7,3614090360);f=l(f,a,d,e,c[b+1],12,3905402710);e=l(e,f,a,d,c[b+2],17,606105819);d=l(d,e,f,a,c[b+3],22,3250441966);a=l(a,d,e,f,c[b+4],7,4118548399);f=l(f,a,d,e,c[b+5],12,1200080426);e=l(e,f,a,d,c[b+6],17,2821735955);
d=l(d,e,f,a,c[b+7],22,4249261313);a=l(a,d,e,f,c[b+8],7,1770035416);f=l(f,a,d,e,c[b+9],12,2336552879);e=l(e,f,a,d,c[b+10],17,4294925233);d=l(d,e,f,a,c[b+11],22,2304563134);a=l(a,d,e,f,c[b+12],7,1804603682);f=l(f,a,d,e,c[b+13],12,4254626195);e=l(e,f,a,d,c[b+14],17,2792965006);d=l(d,e,f,a,c[b+15],22,1236535329);a=m(a,d,e,f,c[b+1],5,4129170786);f=m(f,a,d,e,c[b+6],9,3225465664);e=m(e,f,a,d,c[b+11],14,643717713);d=m(d,e,f,a,c[b+0],20,3921069994);a=m(a,d,e,f,c[b+5],5,3593408605);f=m(f,a,d,e,c[b+10],9,38016083);
e=m(e,f,a,d,c[b+15],14,3634488961);d=m(d,e,f,a,c[b+4],20,3889429448);a=m(a,d,e,f,c[b+9],5,568446438);f=m(f,a,d,e,c[b+14],9,3275163606);e=m(e,f,a,d,c[b+3],14,4107603335);d=m(d,e,f,a,c[b+8],20,1163531501);a=m(a,d,e,f,c[b+13],5,2850285829);f=m(f,a,d,e,c[b+2],9,4243563512);e=m(e,f,a,d,c[b+7],14,1735328473);d=m(d,e,f,a,c[b+12],20,2368359562);a=n(a,d,e,f,c[b+5],4,4294588738);f=n(f,a,d,e,c[b+8],11,2272392833);e=n(e,f,a,d,c[b+11],16,1839030562);d=n(d,e,f,a,c[b+14],23,4259657740);a=n(a,d,e,f,c[b+1],4,2763975236);
f=n(f,a,d,e,c[b+4],11,1272893353);e=n(e,f,a,d,c[b+7],16,4139469664);d=n(d,e,f,a,c[b+10],23,3200236656);a=n(a,d,e,f,c[b+13],4,681279174);f=n(f,a,d,e,c[b+0],11,3936430074);e=n(e,f,a,d,c[b+3],16,3572445317);d=n(d,e,f,a,c[b+6],23,76029189);a=n(a,d,e,f,c[b+9],4,3654602809);f=n(f,a,d,e,c[b+12],11,3873151461);e=n(e,f,a,d,c[b+15],16,530742520);d=n(d,e,f,a,c[b+2],23,3299628645);a=o(a,d,e,f,c[b+0],6,4096336452);f=o(f,a,d,e,c[b+7],10,1126891415);e=o(e,f,a,d,c[b+14],15,2878612391);d=o(d,e,f,a,c[b+5],21,4237533241);
a=o(a,d,e,f,c[b+12],6,1700485571);f=o(f,a,d,e,c[b+3],10,2399980690);e=o(e,f,a,d,c[b+10],15,4293915773);d=o(d,e,f,a,c[b+1],21,2240044497);a=o(a,d,e,f,c[b+8],6,1873313359);f=o(f,a,d,e,c[b+15],10,4264355552);e=o(e,f,a,d,c[b+6],15,2734768916);d=o(d,e,f,a,c[b+13],21,1309151649);a=o(a,d,e,f,c[b+4],6,4149444226);f=o(f,a,d,e,c[b+11],10,3174756917);e=o(e,f,a,d,c[b+2],15,718787259);d=o(d,e,f,a,c[b+9],21,3951481745);a=k(a,h);d=k(d,g);e=k(e,j);f=k(f,i)}return(p(a)+p(d)+p(e)+p(f)).toLowerCase()}})})(jQuery);

// JSON stuff (http://www.json.org/json2.js)
;if(!this.JSON)this.JSON={};
(function(){function l(b){return b<10?"0"+b:b}function o(b){p.lastIndex=0;return p.test(b)?'"'+b.replace(p,function(f){var c=r[f];return typeof c==="string"?c:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function m(b,f){var c,d,g,j,i=h,e,a=f[b];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(b);if(typeof k==="function")a=k.call(f,b,a);switch(typeof a){case "string":return o(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";h+=n;e=[];if(Object.prototype.toString.apply(a)==="[object Array]"){j=a.length;for(c=0;c<j;c+=1)e[c]=m(c,a)||"null";g=e.length===0?"[]":h?"[\n"+h+e.join(",\n"+h)+"\n"+i+"]":"["+e.join(",")+"]";h=i;return g}if(k&&typeof k==="object"){j=k.length;for(c=0;c<j;c+=1){d=k[c];if(typeof d==="string")if(g=m(d,a))e.push(o(d)+(h?": ":":")+g)}}else for(d in a)if(Object.hasOwnProperty.call(a,d))if(g=m(d,a))e.push(o(d)+(h?": ":":")+g);g=e.length===0?"{}":h?"{\n"+h+e.join(",\n"+h)+
"\n"+i+"}":"{"+e.join(",")+"}";h=i;return g}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,n,r={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;if(typeof JSON.stringify!=="function")JSON.stringify=function(b,f,c){var d;n=h="";if(typeof c==="number")for(d=0;d<c;d+=1)n+=" ";else if(typeof c==="string")n=c;if((k=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw Error("JSON.stringify");return m("",
{"":b})};if(typeof JSON.parse!=="function")JSON.parse=function(b,f){function c(g,j){var i,e,a=g[j];if(a&&typeof a==="object")for(i in a)if(Object.hasOwnProperty.call(a,i)){e=c(a,i);if(e!==undefined)a[i]=e;else delete a[i]}return f.call(g,j,a)}var d;b=String(b);q.lastIndex=0;if(q.test(b))b=b.replace(q,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+b+")");return typeof f==="function"?c({"":d},""):d}throw new SyntaxError("JSON.parse");}})();


(function(d,c){var a=function(){},b={},b=b.prototype={Result:0,Data:{}},a=a.prototype={ER_SUCCESS:0,ER_SERVERERROR:248,ER_NOTONLINE:249,ER_NOTLOGGEDIN:250,ER_BADDATA:251,ER_ALREADYEXISTS:252,ER_MALFORMED:253,ER_DBERROR:254,ER_ACCESSDENIED:255,SERVERCODE_DIRECTORY:"./Server/",STATICINFO_DIRECTORY:"./Core/staticInfo/",API_URI:"./Server/API.php",TYPE_ACCOUNT:0,TYPE_CHARACTER:1,TYPE_CHAT:2,TYPE_COMMANDS:3,TYPE_ITEM:4,TYPE_MAP:5,TYPE_MONSTER:6,TYPE_PLACES:7,TYPE_API:8,COMPRESSION_MODE_NONE:0,COMPRESSION_MODE_jSEND:1,
Version:"0.0.1",CurrentLanguage:"en",DebugMode:false,RequestDurationTotal:0,Requests:0,GlobalErrorCount:0,CompressionMode:this.COMPRESSION_MODE_NONE,__requestId:0,Temp:[],CallbackStack:[],QueueDefaults:{AutoSubmit:true,Timeout:1E3},GenerateRequestId:function(){vc.__requestId++;return vc.__requestId+"m"},DisconnectionNotice:function(){alert("There is a problem connecting to the server.\nPlease check your internet connection.")},ProcessCallbacks:function(a){for(var b in a)if(vc.isInteger(b*1)){var e=
vc.CallbackStack[a[b].Id];if(e!==c&&typeof e.Method=="function"){var d={};if(e.Data!==c)d=e.Data;e.Method(a[b],d)}vc.CallbackStack.splice(a[b],1)}},SendSingleRequest:function(a,b,c,e){var d={Id:a,Type:b,Action:c,Data:e},a=[];a[0]=d;a=JSON.stringify(a);vc.CompressionMode==vc.COMPRESSION_MODE_jSEND&&(a=$.jSEND(a));$.ajax({data:{Data:a},success:function(a,b,c){vc.GlobalErrorCount=0;vc.ProcessCallbacks(a,b,c)},error:function(a,b,c){b=="timeout"?vc.GlobalErrorCount<3?(vc.SendSingleRequest(d.Id,d.Type,
d.Action,d.Data),vc.GlobalErrorCount++):vc.DisconnectionNotice(d):vc.ProcessCallbacks({0:{Result:vc.ER_SERVERERROR,Id:d.Id,Data:{}}},b,c)}})},SendQueue:function(a){var b=JSON.stringify(a.Items);vc.CompressionMode==vc.COMPRESSION_MODE_jSEND&&(b=$.jSEND(b));$.ajax({data:{Data:b},success:function(b,c,e){for(var d in a)a.hasOwnProperty(d)&&vc.ProcessCallbacks(a.Items[d],c,e);a.Items=[]}})},CheckVersion:function(b){$.ajax({async:false,url:a.STATICINFO_DIRECTORY+"version.txt",cache:false,success:function(a){b(a)}})},
CalculateLevelRequiredExp:function(a){return Math.round(Math.pow(a+38.19,Math.log((a+38.19)*5)/Math.log(17-a/150))-829.53)},AlignName:function(a){var b="",c="";a.AlignGood<=-100?b="Evil ":a.AlignGood>=100&&(b="Good");a.AlignOrder<=-100?c="Chaotic":a.AlignOrder>=100&&(c="Ordered");a="Neutral";if(b!==""||c!=="")a="",b!==""&&(a=" "),a=b+a+c;return a},isInteger:function(a){return a.toString().search(/^-?[0-9]+$/)===0}},b=function(){}.prototype=function(a){this.Timeout=vc.QueueDefaults.Timeout;this.AutoSubmit=
vc.QueueDefaults.AutoSubmit;if(a.Timeout!==c)this.Timeout=a.Timeout;if(a.AutoSubmit!==c)this.AutoSubmit=a.AutoSubmit;this.Items=[];this.AddItem=function(a,b,c,e){var i=vc.GenerateRequestId();vc.CallbackStack[i]={Method:e,Data:c};this.Items.push({Id:i,Type:a,Action:b,Data:c})}};b.constructor=b;var e;e=function(){}.prototype=function(){this.CharacterId="";this.HasPin=false;this.MapId=this.CreatedOn=this.Name="";this.Bank=this.Gold=this.Health=this.Vitality=this.Wisdom=this.Intelligence=this.Dexterity=
this.Strength=this.Experience=this.FreeLevels=this.Level=this.AlignOrder=this.AlignGood=this.Gender=this.RaceId=this.PositionY=this.PositionX=0;this.CurrentChannel="CHAN_00000000000000000000001";this.Channels=[];this.Inventories=[];this.Inventories.Personal=[];this.Equipment=[];this.CurrentMap={};this.RaceName=function(){return a.Races[this.RaceId].Name};this.GenderName=function(){return this.Gender===0?"Male":"Female"};this.NextLevelAt=function(){return vc.CalculateLevelRequiredExp(this.Level+this.FreeLevels)};
this.AlignName=function(){return vc.AlignName(this)};this.Construct=function(b){this.CharacterId=b.CharacterId;this.Bank=b.Bank;this.HasPin=b.HasPin;this.Name=b.Name;this.CreatedOn=b.CreatedOn;this.MapId=b.MapId;this.PositionX=b.PositionX;this.PositionY=b.PositionY;this.RaceId=b.RaceId;this.Gender=b.Gender;this.AlignGood=b.AlignGood;this.AlignOrder=b.AlignOrder;this.Level=b.Level;this.FreeLevels=b.FreeLevels;this.Experience=b.Experience;this.Strength=b.Strength;this.Dexterity=b.Dexterity;this.Intelligence=
b.Intelligence;this.Wisdom=b.Wisdom;this.Vitality=b.Vitality;this.Health=b.Health;this.Gold=b.Gold;this.Channels=b.Channels;this.CurrentMap=a.Maps[b.MapId];this.Equipment=b.Equipment;this.RacialVitality=b.RacialVitality;this.RacialStrength=b.RacialStrength;this.RacialDexterity=b.RacialDexterity;this.RacialWisdom=b.RacialWisdom;this.RacialIntelligence=b.RacialIntelligence}};e.prototype.constructor=e;d.V2Core=d.vc=a;d.Character=e;d.Queue=b})(window);
(function(){var d;d=function(){}.prototype={ACTION_LOGIN:0,ACTION_REGISTER:1,ACTION_LOGOUT:2,Login:function(c,a,b){c={UserName:c,Password:a};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_ACCOUNT,vc.as.ACTION_LOGIN,c)},Register:function(c,a,b,e){c={UserName:c,Password:a,Email:b};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:e,Data:c};vc.SendSingleRequest(a,vc.TYPE_ACCOUNT,vc.as.ACTION_REGISTER,c)},Logout:function(c){var a={},b=vc.GenerateRequestId();
vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_ACCOUNT,vc.as.ACTION_LOGOUT,a)}};V2Core.AccountService=V2Core.as=d})(window);
(function(){var d=function(){},d=d.prototype={ACTION_TOP:0,ACTION_COUNT:1,ACTION_ONLINE:2,GetTops:function(c,a,b,e,i,f){c=JSON.stringify({Action:d.ACTION_TOP,Data:{Num:c,Position:a,Sort:b,ListType:e,Race:i}});vc.CompressionMode==vc.COMPRESSION_MODE_jSEND&&(c=$.jSEND(c));$.getJSON(vc.API_URI,{Data:c},function(a){f(a[0])})},Count:function(c){var a=JSON.stringify({Action:vc.api.ACTION_TOP});vc.CompressionMode==vc.COMPRESSION_MODE_jSEND&&(a=$.jSEND(a));$.getJSON(vc.API_URI,{Data:a},function(a){c(a[0])})},
Online:function(c){var a=JSON.stringify({Action:vc.api.ACTION_ONLINE});vc.CompressionMode==vc.COMPRESSION_MODE_jSEND&&(a=$.jSEND(a));$.getJSON(vc.API_URI,{Data:a},function(a){c(a[0])})}};V2Core.APIService=V2Core.api=d})(window);
(function(){var d;d=function(){}.prototype={ACTION_CREATE:0,ACTION_LIST:1,ACTION_CHECKNAME:2,ACTION_SELECTCHARACTER:3,ACTION_GETCURRENTCHARACTER:4,ACTION_LEVELUP:5,ACTION_LOADLISTFORCELL:6,ACTION_FIGHT:7,Create:function(c,a,b,e,d,f,g,h,j,k){c={Name:c,Gender:a,Pin:b,RaceId:e,Strength:d,Dexterity:f,Intelligence:g,Wisdom:h,Vitality:j};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:k,Data:c};vc.SendSingleRequest(a,vc.TYPE_CHARACTER,vc.cs.ACTION_CREATE,c)},List:function(c){var a={},b=vc.GenerateRequestId();
vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_CHARACTER,vc.cs.ACTION_LIST,a)},CheckName:function(c,a){var b={Name:c},e=vc.GenerateRequestId();vc.CallbackStack[e]={Method:a,Data:b};vc.SendSingleRequest(e,vc.TYPE_CHARACTER,vc.cs.ACTION_CHECKNAME,b)},Select:function(c,a,b){c={Character:c,Pin:a};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_CHARACTER,vc.cs.ACTION_SELECTCHARACTER,c)},GetCurrentCharacter:function(c){var a={},b=vc.GenerateRequestId();
vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_CHARACTER,vc.cs.ACTION_GETCURRENTCHARACTER,a)},LevelUp:function(c,a){var b={Stat:c},e=vc.GenerateRequestId();vc.CallbackStack[e]={Method:a,Data:b};vc.SendSingleRequest(e,vc.TYPE_CHARACTER,vc.cs.ACTION_LEVELUP,b)},PlayerListByLocation:function(c){var a={},b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_CHARACTER,vc.cs.ACTION_LOADLISTFORCELL,a)},Fight:function(c,a,b){c={CharacterId:c,FightType:a};
a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_CHARACTER,vc.cs.ACTION_FIGHT,c)},CalculateAlignColor:function(c,a){var b=[214,192,192,107,0],e=[214,0,192,36,170],d=[51,0,192,178,238],f=b[4].toString(16),g=e[4].toString(16),h=d[4].toString(16);if(c>99||c<-99||a>99||a<-99){var f=b[4],g=e[4],h=d[4],j=b[4],k=e[4],l=d[4];c>99?(f=b[0],g=e[0],h=d[0]):c<-99&&(f=b[1],g=e[1],h=d[1]);a>99?(j=b[2],k=e[2],l=d[2]):a<-99?(j=b[3],k=e[3],l=d[3]):(j=f,k=g,l=h);b=Math.abs(c)/
(Math.abs(a)+Math.abs(c));e=Math.abs(a)/(Math.abs(a)+Math.abs(c));g=k*e+g*b>>1<<1;h=l*e+h*b>>1<<1;f=(j*e+f*b>>1<<1).toString(16);g=g.toString(16);h=h.toString(16)}f===0&&(f="00");g===0&&(g="00");h===0&&(h="00");return f+""+g+""+h}};V2Core.CharacterService=V2Core.cs=d})(window);
(function(){var d=[];d.General="CHAN_00000000000000000000001";d.Trade="CHAN_00000000000000000000002";var c=function(){},c=c.prototype={ACTION_SENDMESSAGE:0,ACTION_GETMESSAGESFROMCHANNEL:1,ACTION_GETMESSAGESFORCHARACTER:2,CHAT_TYPE_GENERAL:0,CHAT_TYPE_EMOTE:1,CHAT_TYPE_SYSTEM:255,CHAT_TYPE_IDPLAYER:997,CHAT_TYPE_OPENPRIVATECHANNEL:998,CHAT_TYPE_MOTD:999,StaticRooms:d,GetMessagesFromChannel:function(a,b){var c={Channel:a},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:b,Data:c};vc.SendSingleRequest(d,
vc.TYPE_CHAT,vc.ch.ACTION_GETMESSAGESFROMCHANNEL,c)},GetMessagesForCharacter:function(a){try{var b={},c=vc.GenerateRequestId();vc.CallbackStack[c]={Method:a,Data:b};vc.SendSingleRequest(c,vc.TYPE_CHAT,vc.ch.ACTION_GETMESSAGESFORCHARACTER,b)}catch(d){sleep(1E3),a()}},SendMessageToChannel:function(a,b,c){var d=vc.ch.Utilities.ParseMessage(b);switch(d.Type){case vc.ChatService.CHAT_TYPE_GENERAL:var f={Channel:a,Message:b},a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:c,Data:f};vc.SendSingleRequest(a,
vc.TYPE_CHAT,vc.ch.ACTION_SENDMESSAGE,f);break;case vc.ChatService.CHAT_TYPE_EMOTE:vc.cmd.SendChatCommand(a,vc.cmd.ACTION_EMOTE,d.Message,c);break;default:c({Result:V2Core.ER_MALFORMED,Data:f})}},JoinChannel:function(a,b){var c={Channel:a},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:b,Data:c};vc.SendSingleRequest(d,vc.TYPE_COMMANDS,vc.cmd.ACTION_JOINCHANNEL,c)},PartChannel:function(a,b){var c={Channel:a},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:b,Data:c};vc.SendSingleRequest(d,
vc.TYPE_COMMANDS,vc.cmd.ACTION_CHANNEL_PART,c)},CreateChannel:function(a,b,c,d,f){a={Channel:a,Motd:b,PublicRead:c,PublicWrite:d};b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:f,Data:a};vc.SendSingleRequest(b,vc.TYPE_COMMANDS,vc.cmd.ACTION_CHANNEL_CREATE,a)},SetRights:function(a,b,c,d){a={Channel:a,Character:b,Rights:c};b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:d,Data:a};vc.SendSingleRequest(b,vc.TYPE_COMMANDS,vc.cmd.ACTION_CHANNEL_SETRIGHTS,a)},SetParameters:function(a,b,c,d){a=
{ChannelId:a,Parameter:b,Value:c};b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:d,Data:a};vc.SendSingleRequest(b,vc.TYPE_COMMANDS,vc.cmd.ACTION_CHANNEL_SETPARAMETERS,a)},Utilities:{},ChatTypes:{}};c.Utilities=c.Utilities.prototype={ParseMessage:function(a){var b=c.CHAT_TYPE_GENERAL,e=false;if(a.indexOf("/e ")===0)b=c.CHAT_TYPE_EMOTE,a=a.substr(3,a.length-3);else if(a.indexOf("/join")===0)b=vc.CommandService.ACTION_JOINCHANNEL,a=a.substr(5,a.length-5),e=true;else if(a.indexOf("/create")===0)b=
vc.CommandService.ACTION_CHANNEL_CREATE,a=a.substr(7,a.length-7),e=true;else if(a.indexOf("/part")===0)b=vc.CommandService.ACTION_CHANNEL_PART,a=a.substr(5,a.length-1),e=true;else if(a.indexOf("/mod")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/admin")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/mute")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/unmute")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,
e=true;else if(a.indexOf("/kick")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/invite")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/unadmin")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/unmod")===0)b=vc.CommandService.ACTION_CHANNEL_SETRIGHTS,e=true;else if(a.indexOf("/m ")===0)b=vc.ChatService.CHAT_TYPE_OPENPRIVATECHANNEL,a=a.substr(3,a.length-1),e=true;else if(a.indexOf("/id ")===0)b=vc.ChatService.CHAT_TYPE_IDPLAYER,
a=a.substr(4,a.length-1),e=true;else if(a.indexOf("/motd")===0)b=vc.CommandService.ACTION_CHANNEL_SETPARAMETERS,e=true;else if(a.indexOf("/publicRead")===0)b=vc.CommandService.ACTION_CHANNEL_SETPARAMETERS,e=true;else if(a.indexOf("/publicWrite")===0)b=vc.CommandService.ACTION_CHANNEL_SETPARAMETERS,e=true;return{Type:b,Message:a,NonMessageCommand:e}},ParseRights:function(a){a.indexOf("/mod ")===0?(rights={Read:1,Write:1,Moderate:1,isJoined:1},charName=a.substr(5,a.length-5)):a.indexOf("/admin ")===
0?(rights={Read:1,Write:1,Moderate:1,Administrate:1,isJoined:1},charName=a.substr(7,a.length-7)):a.indexOf("/mute ")===0?(charName=a.substr(6,a.length-6),rights={Read:1,Write:0,Moderate:0,Administrate:0,isJoined:1}):a.indexOf("/unmute ")===0?(charName=a.substr(8,a.length-8),rights={Read:1,Write:1,Moderate:0,Administrate:0,isJoined:1}):a.indexOf("/invite ")===0?(charName=a.substr(8,a.length-8),rights={Read:1,Write:1,Moderate:0,Administrate:0,isJoined:0}):a.indexOf("/kick ")===0?(charName=a.substr(6,
a.length-6),rights={Read:0,Write:0,Moderate:0,Administrate:0,isJoined:0}):a.indexOf("/unadmin ")===0?(charName=a.substr(9,a.length-9),rights={Read:1,Write:1,Moderate:1,Administrate:0,isJoined:0}):a.indexOf("/unmod ")===0&&(charName=a.substr(7,a.length-7),rights={Read:1,Write:1,Moderate:0,Administrate:0,isJoined:0});return{Rights:rights,Character:charName}}};V2Core.ChatService=V2Core.ch=c})(window);
(function(){var d;d=function(){}.prototype={ACTION_EMOTE:0,ACTION_JOINCHANNEL:1,ACTION_CHANNEL_CREATE:2,ACTION_CHANNEL_PART:3,ACTION_CHANNEL_SETRIGHTS:4,ACTION_CHANNEL_SETPARAMETERS:5,ACTION_ID:6,SendChatCommand:function(c,a,b,e){var d={},f=vc.GenerateRequestId();switch(a){case vc.CommandService.ACTION_EMOTE:d={Channel:c,Message:b};vc.CallbackStack[f]={Method:e,Data:d};vc.SendSingleRequest(f,vc.TYPE_COMMANDS,a,d);break;case vc.CommandService.ACTION_ID:d={Character:b};vc.CallbackStack[f]={Method:e,
Data:d};vc.SendSingleRequest(f,vc.TYPE_COMMANDS,a,d);break;default:e({Result:V2Core.ER_MALFORMED,Data:d})}}};V2Core.CommandService=V2Core.cmd=d})(window);
(function(d){var c;c=function(){}.prototype={UpdateStats:function(){var a=d.MyCharacter;$("#myCharacter_Name").text(a.Name);$("#myCharacter_Strength").text(a.Strength);$("#myCharacter_Dexterity").text(a.Dexterity);$("#myCharacter_Wisdom").text(a.Wisdom);$("#myCharacter_Intelligence").text(a.Intelligence);$("#myCharacter_Vitality").text(a.Vitality);$("#myCharacter_Gold, #myCharacter_CurrentGold").text(a.Gold);$("#myCharacter_ExperienceBar").progressbar("value",a.Experience/a.NextLevelAt()*100).attr("title",
a.Experience+" / "+a.NextLevelAt());$("#myCharacter_HealthBar").progressbar("value",a.Health/a.Vitality*100).attr("title",a.Health+" / "+a.Vitality);$("#myCharacter_LevelTitle, #myCharacter_Level").text(a.Level);$("#myCharacter_FreeLevels").text(a.FreeLevels);$("#myCharacter_Health").text(a.Health);$("#myCharacter_Experience").text(a.Experience);$("#myCharacter_Bank").text(a.Bank);var b=a.AlignName(),c="neutral";b.indexOf("Good")>-1?c="good":b.indexOf("Evil")>-1&&(c="evil");$("#myCharacter_Alignment").text(b+
" ("+a.AlignGood+" / "+a.AlignOrder+")").siblings(".statLabel").addClass(c);MyCharacter.FreeLevels>0&&$("#statsWindow button, #statsWindow .all").show()},UpdateHealth:function(){var a=d.MyCharacter;$("#myCharacter_HealthBar").progressbar("value",a.Health/a.Vitality*100).attr("title",a.Health+" / "+a.Vitality);$("#myCharacter_Health").text(a.Health)}};V2Core.Interface=V2Core.i=c})(window);
(function(){var d;d=function(){}.prototype={ACTION_GETINVENTORY:0,ACTION_EQUIP:1,ACTION_UNEQUIP:2,ACTION_SEND_TRADE:3,ACTION_ACCEPT_TRADE:4,ITEM_TYPE_WEAPONS:0,ITEM_TYPE_ARMOR:1,ITEM_TYPE_ACCESSORIES:2,ITEM_TYPE_SPELLS:3,TypeMapping:["Weapon","Armor","Accessory","Spell"],GetInventory:function(c){var a={},b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_ITEM,vc.is.ACTION_GETINVENTORY,a)},Equip:function(c,a,b,d){c={ItemId:c,SlotType:a,SlotNumber:b};a=vc.GenerateRequestId();
vc.CallbackStack[a]={Method:d,Data:c};vc.SendSingleRequest(a,vc.TYPE_ITEM,vc.is.ACTION_EQUIP,c)},UnEquip:function(c,a,b,d){c={ItemId:c,SlotType:a,SlotNumber:b};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:d,Data:c};vc.SendSingleRequest(a,vc.TYPE_ITEM,vc.is.ACTION_UNEQUIP,c)},SendTrade:function(c,a,b,d){c={ItemId:c,Gold:a,Player:b};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:d,Data:c};vc.SendSingleRequest(a,vc.TYPE_ITEM,vc.is.ACTION_SEND_TRADE,c)},AcceptTrade:function(c,a){var b={Trade:c},
d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:a,Data:b};vc.SendSingleRequest(d,vc.TYPE_ITEM,vc.is.ACTION_ACCEPT_TRADE,b)}};V2Core.ItemService=V2Core.is=d})(window);
(function(){var d;d=function(){}.prototype={ACTION_MOVE:0,ACTION_CHANGEMAP:1,ACTION_LOADDATA:5,ACTION_BUY:0,ACTION_SELL:1,ACTION_REVIVE:2,ACTION_WITHDRAW:3,ACTION_DEPOSIT:4,ACTION_TRANSFER:5,PLACE_TYPE_STORE:0,PLACE_TYPE_SHRINE:1,PLACE_TYPE_BANK:2,LOCATION_TYPE_STREET:0,LOCATION_TYPE_WALL:1,LOCATION_TYPE_GUARD:2,LOCATION_TYPE_RESIDENTIAL:3,LOCATION_TYPE_COMMERCE:4,LOCATION_TYPE_MARKET:5,LOCATION_TYPE_BANK:6,LOCATION_TYPE_SHOP:7,LOCATION_TYPE_GRAVEYARD:8,LOCATION_TYPE_SHRINE:9,LOCATION_TYPE_SIEGE:10,
LOCATION_TYPE_BAR:11,LOCATION_TYPE_COURT:12,LOCATION_TYPE_WATER:13,LOCATION_TYPE_COLISEUM:14,Move:function(c,a,b){c={X:c,Y:a};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_MAP,vc.ms.ACTION_MOVE,c)},ChangeMap:function(c){var a={},b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,vc.TYPE_MAP,vc.ms.ACTION_CHANGEMAP,a)},LoadData:function(c,a,b,d,i,f){c={MapId:c,XLow:a,XHigh:d,YLow:b,YHigh:i};a=vc.GenerateRequestId();vc.CallbackStack[a]=
{Method:f,Data:c};vc.SendSingleRequest(a,vc.TYPE_API,vc.ms.ACTION_LOADDATA,c)},Buy:function(c,a){var b={ItemTemplateId:c},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:a,Data:b};vc.SendSingleRequest(d,vc.TYPE_PLACES,vc.ms.ACTION_BUY,b)},Sell:function(c,a){var b={ItemId:c},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:a,Data:b};vc.SendSingleRequest(d,vc.TYPE_PLACES,vc.ms.ACTION_SELL,b)},Revive:function(c){var a={},b=vc.GenerateRequestId();vc.CallbackStack[b]={Method:c,Data:a};vc.SendSingleRequest(b,
vc.TYPE_PLACES,vc.ms.ACTION_REVIVE,a)},Widthdraw:function(c,a){var b={Gold:c},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:a,Data:b};vc.SendSingleRequest(d,vc.TYPE_PLACES,vc.ms.ACTION_WITHDRAW,b)},Deposit:function(c,a){var b={Gold:c},d=vc.GenerateRequestId();vc.CallbackStack[d]={Method:a,Data:b};vc.SendSingleRequest(d,vc.TYPE_PLACES,vc.ms.ACTION_DEPOSIT,b)},Transfer:function(c,a,b){c={Gold:c};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_PLACES,
vc.ms.ACTION_TRANSFER,c)}};V2Core.MapService=V2Core.ms=d})(window);(function(){var d;d=function(){}.prototype={ACTION_FIGHT:0,MonsterSpecialTypes:"Normal,Merchant,Defender,Assassin,Leader,Elder,Veteran,Fanatic,Enigma,Saint,Demon,Judge,Anarchist,Fool,Illusionist".split(","),Fight:function(c,a,b){c={MonsterId:c,FightType:a};a=vc.GenerateRequestId();vc.CallbackStack[a]={Method:b,Data:c};vc.SendSingleRequest(a,vc.TYPE_MONSTER,vc.mn.ACTION_FIGHT,c)}};V2Core.MonsterService=V2Core.mn=d})(window);

